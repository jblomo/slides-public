<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>BuildingCloudCulture</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="title" content="BuildingCloudCulture"/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2013-11-05T23:39-0800"/>
<meta name="author" content="Jim Blomo"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>

<link rel="stylesheet" type="text/css" href="production/common.css" />
<link rel="stylesheet" type="text/css" href="production/screen.css" media="screen" />
<link rel="stylesheet" type="text/css" href="production/projection.css" media="projection" />
<link rel="stylesheet" type="text/css" href="production/yelp.css" media="projection" />
<link rel="stylesheet" type="text/css" href="production/presenter.css" media="presenter" />
<link href='https://fonts.googleapis.com/css?family=Dosis:800|Ubuntu' rel='stylesheet' type='text/css'>


</head>
<body>

<div id="preamble">

</div>

<div id="content">
<h1 class="title">BuildingCloudCulture</h1>


<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1 Building a Cloud Culture at Yelp</a></li>
<li><a href="#sec-2">2 Why Cloud?</a></li>
<li><a href="#sec-3">3 Yelp!</a>
<ul>
<li><a href="#sec-3-1">3.1 Park Kitchen</a></li>
</ul>
</li>
<li><a href="#sec-4">4 Yelp Data</a>
<ul>
<li><a href="#sec-4-1">4.1 Dimensionality</a></li>
</ul>
</li>
<li><a href="#sec-5">5 Why Cloud?</a>
<ul>
<li><a href="#sec-5-1">5.1 Open source</a></li>
</ul>
</li>
<li><a href="#sec-6">6 Make the trade-off!</a>
<ul>
<li><a href="#sec-6-1">6.1 Big Theme</a></li>
</ul>
</li>
<li><a href="#sec-7">7 How Cloud?</a>
<ul>
<li><a href="#sec-7-1">7.1 Standard</a></li>
</ul>
</li>
<li><a href="#sec-8">8 Back to the Past</a>
<ul>
<li><a href="#sec-8-1">8.1 Little Jon</a></li>
</ul>
</li>
<li><a href="#sec-9">9 Logging</a></li>
<li><a href="#sec-10">10 Logging - an aside</a>
<ul>
<li><a href="#sec-10-1">10.1 Do this</a></li>
</ul>
</li>
<li><a href="#sec-11">11 Log Analysis</a>
<ul>
<li><a href="#sec-11-1">11.1 2010</a></li>
</ul>
</li>
<li><a href="#sec-12">12 Hadoop Trade-offs</a>
<ul>
<li><a href="#sec-12-1">12.1 Trade-offs</a></li>
</ul>
</li>
<li><a href="#sec-13">13 Riddle: Success?</a>
<ul>
<li><a href="#sec-13-1">13.1 Don't get upset!</a></li>
</ul>
</li>
<li><a href="#sec-14">14 Hadoop Issues</a></li>
<li><a href="#sec-15">15 EMR Solutions</a>
<ul>
<li><a href="#sec-15-1">15.1 Notes</a></li>
</ul>
</li>
<li><a href="#sec-16">16 Trade-offs</a>
<ul>
<li><a href="#sec-16-1">16.1 Fake trade-offs</a></li>
</ul>
</li>
<li><a href="#sec-17">17 Trade-offs</a>
<ul>
<li><a href="#sec-17-1">17.1 Fake trade-offs</a></li>
</ul>
</li>
<li><a href="#sec-18">18 Trade-offs</a>
<ul>
<li><a href="#sec-18-1">18.1 Real trade-offs</a></li>
</ul>
</li>
<li><a href="#sec-19">19 Cargo Cult</a>
<ul>
<li><a href="#sec-19-1">19.1 Cloud is not enough</a></li>
</ul>
</li>
<li><a href="#sec-20">20 Standard Configs</a>
<ul>
<li><a href="#sec-20-1">20.1 Remove specialty knowledge</a></li>
</ul>
</li>
<li><a href="#sec-21">21 mrjob Configs</a></li>
<li><a href="#sec-22">22 Resource Tracking</a>
<ul>
<li><a href="#sec-22-1">22.1 Be prepared</a></li>
</ul>
</li>
<li><a href="#sec-23">23 Testing</a>
<ul>
<li><a href="#sec-23-1">23.1 Trade-off</a></li>
</ul>
</li>
<li><a href="#sec-24">24 mrjob is Open Source</a>
<ul>
<li><a href="#sec-24-1">24.1 Benefits</a></li>
</ul>
</li>
<li><a href="#sec-25">25 Adoption</a>
<ul>
<li><a href="#sec-25-1">25.1 Story</a></li>
</ul>
</li>
<li><a href="#sec-26">26 Cloud Calculations</a>
<ul>
<li><a href="#sec-26-1">26.1 Emphasize</a></li>
</ul>
</li>
<li><a href="#sec-27">27 Cost</a>
<ul>
<li><a href="#sec-27-1">27.1 Bogeyman</a></li>
</ul>
</li>
<li><a href="#sec-28">28 Cost Control</a></li>
<li><a href="#sec-29">29 Data Availability</a>
<ul>
<li><a href="#sec-29-1">29.1 Reminder</a></li>
</ul>
</li>
<li><a href="#sec-30">30 Query to Category</a>
<ul>
<li><a href="#sec-30-1">30.1 Explanation</a></li>
<li><a href="#sec-30-2">30.2 Query to Category</a>
<ul>
<li><a href="#sec-30-2-1">30.2.1 Unstructured Data</a></li>
</ul></li>
</ul>
</li>
<li><a href="#sec-31">31 Overview</a>
<ul>
<li><a href="#sec-31-1">31.1 Data movement</a></li>
</ul>
</li>
<li><a href="#sec-32">32 Pitfalls</a>
<ul>
<li><a href="#sec-32-1">32.1 Unicorns</a></li>
</ul>
</li>
<li><a href="#sec-33">33 Leaky Abstractions</a>
<ul>
<li><a href="#sec-33-1">33.1 Read docs</a></li>
</ul>
</li>
<li><a href="#sec-34">34 Closed Source</a>
<ul>
<li><a href="#sec-34-1">34.1 Interactions</a></li>
</ul>
</li>
<li><a href="#sec-35">35 Data explosion</a>
<ul>
<li><a href="#sec-35-1">35.1 Tron</a></li>
</ul>
</li>
<li><a href="#sec-36">36 Wanted</a>
<ul>
<li><a href="#sec-36-1">36.1 What</a></li>
</ul>
</li>
<li><a href="#sec-37">37 Next Up: Services</a>
<ul>
<li><a href="#sec-37-1">37.1 Cloud</a></li>
</ul>
</li>
<li><a href="#sec-38">38 Tandem</a>
<ul>
<li><a href="#sec-38-1">38.1 Tools</a></li>
</ul>
</li>
<li><a href="#sec-39">39 Cloud Strategy</a>
<ul>
<li><a href="#sec-39-1">39.1 Wrap Up</a></li>
</ul>
</li>
<li><a href="#sec-40">40 Hiring</a>
<ul>
<li><a href="#sec-40-1">40.1 We are Hiring</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Building a Cloud Culture at Yelp &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span>&nbsp;<span class="center">center</span></span></h2>
<div class="outline-text-2" id="text-1">

<p>  Jim Blomo (@jimblomo)
</p>
<p>
  Engineering Manager - Yelp
</p>
<p>
  Lecturer - UC Berkeley
</p>
</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Why Cloud? &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span></span></h2>
<div class="outline-text-2" id="text-2">

<ul>
<li>Why and how is Yelp moving some functionality to the Cloud?
</li>
<li>Open source tools for the move
</li>
<li>Pain points
</li>
</ul>


</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Yelp! &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span>&nbsp;<span class="two_col">two_col</span></span></h2>
<div class="outline-text-2" id="text-3">

<ul>
<li>Connects people with great local businesses
</li>
<li>Connects me with Park Kitchen
</li>
</ul>

<p><img src="img/park-kitchen.png"  alt="img/park-kitchen.png" />
</p>
</div>

<div id="outline-container-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> Park Kitchen &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h3>
<div class="outline-text-3" id="text-3-1">

<ul>
<li>Anyone not hear of Yelp? Identified the person who eats at the hotel
     restaurant&hellip; get the app, it'll help you find a great place to eat
     tonight.
</li>
<li>I had one of the best meals this year at a place call Park Kitchen across
     the river&hellip; tempura style green beans and bacon with this great dip&hellip;
</li>
<li>You can see pictures of it
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Yelp Data &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span></span></h2>
<div class="outline-text-2" id="text-4">

<ul>
<li>250+ GB compressed logs / day
</li>
<li>7+ TB in databases
</li>
<li>TB+ in secondary and derived data
</li>
</ul>

<p><img src="img/yelp-growth.png"  alt="img/yelp-growth.png" />
</p>
</div>

<div id="outline-container-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> Dimensionality &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h3>
<div class="outline-text-3" id="text-4-1">

<ul>
<li>An unusual feature of our data is the variety:
<ul>
<li>review text, photos, checkins, menu data, friends, PMs
</li>
</ul>

</li>
<li>Interesting mix of structured and unstructured. And unstructured IN
     structured!
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> Why Cloud? &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span></span></h2>
<div class="outline-text-2" id="text-5">

<ul>
<li>Trade-off <b>specificity &amp; optimization</b> for <b>generality &amp; abstraction</b>
</li>
<li>Similar to open source
</li>
<li>Why? Leverage existing technology to innovate faster
</li>
</ul>


</div>

<div id="outline-container-5-1" class="outline-3">
<h3 id="sec-5-1"><span class="section-number-3">5.1</span> Open source &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h3>
<div class="outline-text-3" id="text-5-1">

<dl>
<dt>Specificity</dt><dd>Ability to tailor an environment to your needs
</dd>
<dt>Generality</dt><dd>Must fit your needs into existing generic solution
</dd>
<dt>Optimization</dt><dd>Squeeze out every drop of performance, from hardware,
     software, networking etc.
</dd>
<dt>Abstraction</dt><dd>Quickly get to the 50% or 80% solution, focus on the part
     that is unique. When you start thinking of a new feature of a website, do
     you start thinking about how to implement the HTTP server? No.
</dd>
<dt>Open source</dt><dd>Using existing packages can let you move fast, but you must
     fit your problem into their domain
</dd>
</dl>


</div>
</div>

</div>

<div id="outline-container-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> Make the trade-off! &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span></span></h2>
<div class="outline-text-2" id="text-6">

<p><img src="img/escher_emblemata_balance_full.jpg"  alt="img/escher_emblemata_balance_full.jpg" />
</p>
</div>

<div id="outline-container-6-1" class="outline-3">
<h3 id="sec-6-1"><span class="section-number-3">6.1</span> Big Theme &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h3>
<div class="outline-text-3" id="text-6-1">

<ul>
<li>Biggest point: when making this move, make the trade-offs!
</li>
<li>One is not inherently better than the other, but you don't win unless you
     capitalize on the advantages of one solution
</li>
<li>Don't try to replicate your current environment and work flow in the cloud
</li>
<li>To make the most of this, fit your problem into the general domain
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-7" class="outline-2">
<h2 id="sec-7"><span class="section-number-2">7</span> How Cloud? &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span>&nbsp;<span class="two_col">two_col</span></span></h2>
<div class="outline-text-2" id="text-7">

<ul>
<li>Amazon Web Services (AWS)
</li>
<li>Elastic MapReduce (EMR)
</li>
<li>Python on Hadoop (mrjob)
</li>
</ul>

<p>  <img src="img/mrjob_large.png"  alt="img/mrjob_large.png" />
</p>
</div>

<div id="outline-container-7-1" class="outline-3">
<h3 id="sec-7-1"><span class="section-number-3">7.1</span> Standard &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h3>
<div class="outline-text-3" id="text-7-1">

<ul>
<li>AWS was and is the biggest game in town
</li>
<li>Biggest environment: remember trade-offs? We're <b>looking</b> for general
     technology we can leverage &ndash; not cheapest or fastest
</li>
<li>EMR is one of those pieces: spin up a cluster
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-8" class="outline-2">
<h2 id="sec-8"><span class="section-number-2">8</span> Back to the Past &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span>&nbsp;<span class="two_col">two_col</span></span></h2>
<div class="outline-text-2" id="text-8">

<ul>
<li><b>2004</b>: Yelp founded.. Yeah!
</li>
<li>Typical LAMP stack with Python
</li>
<li>Hosted in data center
</li>
</ul>

<p><img src="img/little_jon.jpg"  alt="img/little_jon.jpg" />
</p>
</div>

<div id="outline-container-8-1" class="outline-3">
<h3 id="sec-8-1"><span class="section-number-3">8.1</span> Little Jon &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h3>
<div class="outline-text-3" id="text-8-1">

<ul>
<li>Thanks to Little Jon and Chappel, everyone was shouting "Yeah!!"
</li>
<li>Launched with Python
</li>
<li>Before AWS officially launched
</li>
<li>Before Django launched
</li>
<li>Before SQLAlchemy
</li>
<li>Most of the website code is custom, slowly migrating to standards
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-9" class="outline-2">
<h2 id="sec-9"><span class="section-number-2">9</span> Logging &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span></span></h2>
<div class="outline-text-2" id="text-9">

<ul>
<li><b>2007</b>: Got serious about logging
</li>
<li>To understand user behavior, you must record user behavior
</li>
<li>"Ranger": Structured application level logging
</li>
</ul>


</div>

</div>

<div id="outline-container-10" class="outline-2">
<h2 id="sec-10"><span class="section-number-2">10</span> Logging - an aside &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span></span></h2>
<div class="outline-text-2" id="text-10">

<ul>
<li>Log in a structured format
</li>
<li>Log every ID appearing on a page
</li>
<li>Don't log PII or sensitive data
</li>
</ul>





<pre class="src src-json">{user_id: 5,
 request_id: <span style="color: #8b2252;">"b1946ac92492d2347c6235b4d2611184"</span>,
 search_query: <span style="color: #8b2252;">"farm to table"</span>,
 city: <span style="color: #8b2252;">"Portland, OR"</span>,
 results: [17289, 8230452, 825429, 184312,...]
}
</pre>



</div>

<div id="outline-container-10-1" class="outline-3">
<h3 id="sec-10-1"><span class="section-number-3">10.1</span> Do this &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h3>
<div class="outline-text-3" id="text-10-1">

<dl>
<dt>Structured format</dt><dd>JSON, Protocol Buffers, Avro&hellip; just something you
     don't have to manually parse. Trade-offs are another talk
</dd>
<dt>IDs</dt><dd>users, reviews, products, recommendations&hellip; you're going to want to
     know what was viewed, what was taken action on
</dd>
<dt>???</dt><dd>PII ::: There's lots of rules around where and how to store that stuff, and
     you <b>really</b> don't want it out. Easier to lock down DBs with that data than
     logs
</dd>
</dl>


</div>
</div>

</div>

<div id="outline-container-11" class="outline-2">
<h2 id="sec-11"><span class="section-number-2">11</span> Log Analysis &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span></span></h2>
<div class="outline-text-2" id="text-11">

<ul>
<li><b>2010</b>: Got serious about log analysis
</li>
<li>Processing a day of logs took &gt; 24 hours
</li>
<li>Embarrassingly parallel: Hadoop
</li>
</ul>

<p>  <img src="img/inception.jpg"  alt="img/inception.jpg" />
</p>
</div>

<div id="outline-container-11-1" class="outline-3">
<h3 id="sec-11-1"><span class="section-number-3">11.1</span> 2010 &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h3>
<div class="outline-text-3" id="text-11-1">

<ul>
<li>movies: Inception
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-12" class="outline-2">
<h2 id="sec-12"><span class="section-number-2">12</span> Hadoop Trade-offs &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span></span></h2>
<div class="outline-text-2" id="text-12">

<ul>
<li>Java vs Python
</li>
<li>MapReduce vs global knowledge
</li>
<li>Distributed vs single machine
</li>
</ul>


</div>

<div id="outline-container-12-1" class="outline-3">
<h3 id="sec-12-1"><span class="section-number-3">12.1</span> Trade-offs &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h3>
<div class="outline-text-3" id="text-12-1">

<ul>
<li>First big trade-off in this story
</li>
<li>We didn't try to write our own Python version, we used the Java one
</li>
<li>cobbled together our own spare machines for a cluster to experiment on
</li>
<li>Hadoop Streaming shim between writing code in Python, running system in
     Java
</li>
<li>Converted our problems to MR paradigm
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-13" class="outline-2">
<h2 id="sec-13"><span class="section-number-2">13</span> Riddle: Success? &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span>&nbsp;<span class="animate">animate</span>&nbsp;<span class="two_col">two_col</span></span></h2>
<div class="outline-text-2" id="text-13">

<p>  <img src="img/hanoi_vietnam.jpg"  alt="img/hanoi_vietnam.jpg" />
</p><ul>
<li>How do you know when your infrastructure is a success?
</li>
<li>Starts failing under heavy load
</li>
<li>"Too many" users overloading the system
</li>
</ul>


</div>

<div id="outline-container-13-1" class="outline-3">
<h3 id="sec-13-1"><span class="section-number-3">13.1</span> Don't get upset! &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h3>
<div class="outline-text-3" id="text-13-1">

<ul>
<li>Good job, now everyone wants to use your system and scale
</li>
<li>Just have to keep momentum going
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-14" class="outline-2">
<h2 id="sec-14"><span class="section-number-2">14</span> Hadoop Issues &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span></span></h2>
<div class="outline-text-2" id="text-14">

<ul>
<li>Failures correlated with cluster uptime
</li>
<li>Upgrades painful
</li>
<li>Coordination required for new features
</li>
</ul>

<p>  <img src="img/sad_dumbo.jpg"  alt="img/sad_dumbo.jpg" />
</p>
</div>

</div>

<div id="outline-container-15" class="outline-2">
<h2 id="sec-15"><span class="section-number-2">15</span> EMR Solutions &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span>&nbsp;<span class="two_col">two_col</span></span></h2>
<div class="outline-text-2" id="text-15">

<p>  <img src="img/emr.png"  alt="img/emr.png" />
</p><ul>
<li>Clusters up for limited amount of time
</li>
<li>Upgrades handled by Amazon
</li>
<li>Multiple clusters means no capacity coordination
</li>
</ul>


</div>

<div id="outline-container-15-1" class="outline-3">
<h3 id="sec-15-1"><span class="section-number-3">15.1</span> Notes &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h3>
<div class="outline-text-3" id="text-15-1">

<ul>
<li>Upgrades also include Hive, HBase, and now Spark
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-16" class="outline-2">
<h2 id="sec-16"><span class="section-number-2">16</span> Trade-offs &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span></span></h2>
<div class="outline-text-2" id="text-16">

<ul>
<li>Specialty knowledge of Hadoop vs Specialty knowledge of EMR
</li>
<li>Coordination for feature launch vs Coordination of code deployment to cloud
</li>
<li>Testing on the local cluster vs Testing on EMR
</li>
</ul>


</div>

<div id="outline-container-16-1" class="outline-3">
<h3 id="sec-16-1"><span class="section-number-3">16.1</span> Fake trade-offs &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h3>
<div class="outline-text-3" id="text-16-1">

<ul>
<li>Before had to coordinate with systems and other teams to not overwhelm
     system, but with the cloud needed to coordinate with systems and other
     teams to deploy code to the cloud
</li>
<li>Are these the trade-offs you want to make?
</li>
<li>Is this what we hoped to gain from the cloud?
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-17" class="outline-2">
<h2 id="sec-17"><span class="section-number-2">17</span> Trade-offs &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span></span></h2>
<div class="outline-text-2" id="text-17">

<ul>
<li><del>Specialty knowledge of Hadoop vs Specialty knowledge of EMR</del>
</li>
<li><del>Coordination for feature launch vs Coordination of code deployment to cloud</del>
</li>
<li><del>Testing on the local cluster vs Testing on EMR</del>
</li>
</ul>

<p>  <img src="img/no.gif"  alt="img/no.gif" />
</p>
</div>

<div id="outline-container-17-1" class="outline-3">
<h3 id="sec-17-1"><span class="section-number-3">17.1</span> Fake trade-offs &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h3>
<div class="outline-text-3" id="text-17-1">

<ul>
<li>No! You must figure out what you hope to get out of a cloud move and make
     sure and getting the trade-off you'd like
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-18" class="outline-2">
<h2 id="sec-18"><span class="section-number-2">18</span> Trade-offs &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span></span></h2>
<div class="outline-text-2" id="text-18">

<ul>
<li>Specialty knowledge of Hadoop vs Standard configs
</li>
<li>Coordination for feature launch vs Resource consumption tracking
</li>
<li>Testing on local cluster vs good-enough testing of code &amp; infrastructure
</li>
</ul>


</div>

<div id="outline-container-18-1" class="outline-3">
<h3 id="sec-18-1"><span class="section-number-3">18.1</span> Real trade-offs &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h3>
<div class="outline-text-3" id="text-18-1">

<ul>
<li>Here are the real trade-offs we made, with the distinct advantages they
     provide.
</li>
<li>Old ones, maybe you were on the cloud, but you weren't buying anything!
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-19" class="outline-2">
<h2 id="sec-19"><span class="section-number-2">19</span> Cargo Cult &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span>&nbsp;<span class="center">center</span></span></h2>
<div class="outline-text-2" id="text-19">

<p>  <img src="img/cargoplane.jpg"  alt="img/cargoplane.jpg" />
</p>
</div>

<div id="outline-container-19-1" class="outline-3">
<h3 id="sec-19-1"><span class="section-number-3">19.1</span> Cloud is not enough &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h3>
<div class="outline-text-3" id="text-19-1">

<ul>
<li>Just moving to the cloud is not the goal
</li>
<li>You're trying to solve a specific problem, so make sure at the end of the
     day it is solved
</li>
<li>We are trying to make engineers more efficient by giving them tools, not
     more problems
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-20" class="outline-2">
<h2 id="sec-20"><span class="section-number-2">20</span> Standard Configs &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span></span></h2>
<div class="outline-text-2" id="text-20">

<ul>
<li>mrjob will spin up an EMR cluster, run bootstrap options, install
    packages
</li>
<li>At launch, your code copied to cluster
</li>
<li>Configs: Standard, Memory Intensive, CPU Intensive
</li>
</ul>

<p>  <img src="img/staples-easy-button.png"  alt="img/staples-easy-button.png" />
</p>
</div>

<div id="outline-container-20-1" class="outline-3">
<h3 id="sec-20-1"><span class="section-number-3">20.1</span> Remove specialty knowledge &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h3>
<div class="outline-text-3" id="text-20-1">

<ul>
<li>20 minute mark
</li>
<li>We're trading off specialty knowledge for "pretty good" standard
     configurations
</li>
<li>Focus is on business logic, can get out solution faster
</li>
<li>Even if it is not 100% optimized
</li>
<li>The easiest way to address a problem is also the easiest way: just pick a
     new standard config
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-21" class="outline-2">
<h2 id="sec-21"><span class="section-number-2">21</span> mrjob Configs &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span></span></h2>
<div class="outline-text-2" id="text-21">




<pre class="src src-yaml"><span style="color: #a0522d;">runners</span>:
  <span style="color: #a0522d;">emr</span>:
    <span style="color: #b22222;"># </span><span style="color: #b22222;">standard</span>
    <span style="color: #a0522d;">ec2_core_instance_type</span>: m1.large
    <span style="color: #a0522d;">num_ec2_core_instances</span>: 5
    <span style="color: #b22222;"># </span><span style="color: #b22222;">memory intensive</span>
    <span style="color: #a0522d;">ec2_core_instance_type</span>: m1.xlarge
    <span style="color: #a0522d;">num_ec2_core_instances</span>: 12
    <span style="color: #a0522d;">bootstrap_actions</span>:
    - s3://elasticmapreduce/bootstrap-actions/configurations/latest/memory-intensive
    - s3://elasticmapreduce/bootstrap-actions/add-swap
    <span style="color: #b22222;"># </span><span style="color: #b22222;">cpu intensive</span>
    <span style="color: #a0522d;">ec2_core_instance_type</span>: c1.xlarge
    <span style="color: #a0522d;">num_ec2_core_instances</span>: 5
</pre>


</div>

</div>

<div id="outline-container-22" class="outline-2">
<h2 id="sec-22"><span class="section-number-2">22</span> Resource Tracking &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span>&nbsp;<span class="two_col">two_col</span></span></h2>
<div class="outline-text-2" id="text-22">

<ul>
<li>Remove resource constraints, prevent uncontrolled growth
</li>
<li>mrjob shuts down unused clusters
</li>
<li>Monitors for jobs running &gt; 1 day
</li>
<li><code>python -m mrjob.tools.emr.terminate_idle_job_flows -c mrjob.conf</code>
</li>
</ul>


<p>
  <img src="img/trust_verify.jpg"  alt="img/trust_verify.jpg" />
</p>
</div>

<div id="outline-container-22-1" class="outline-3">
<h3 id="sec-22-1"><span class="section-number-3">22.1</span> Be prepared &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h3>
<div class="outline-text-3" id="text-22-1">

<ul>
<li>With a fixed sized cluster, easy to know what was going on&hellip; every
     purchase has to be justified
</li>
<li>But this slows down development: goal is flexibility &amp; speed
</li>
<li>But if you don't have to justify, still need to know what's going on and be
     notified of mistakes
</li>
<li>Gatekeeper =&gt; Trust, but verify
</li>
<li>mrjob has a component which runs as a cron, finds unused clusters,
     terminates them
</li>
<li>Finds clusters running &gt; 1 day, sends emails
</li>
<li>Labels jobs with names: developer and script
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-23" class="outline-2">
<h2 id="sec-23"><span class="section-number-2">23</span> Testing &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span></span></h2>
<div class="outline-text-2" id="text-23">

<ul>
<li>mrjob has "local" mode to simply run MapReduce steps without cluster
</li>
<li>add <code>--runner emr</code> to run on a cluser
</li>
<li>Infrastructure tested with <code>mr_canary.py</code>
</li>
</ul>


</div>

<div id="outline-container-23-1" class="outline-3">
<h3 id="sec-23-1"><span class="section-number-3">23.1</span> Trade-off &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h3>
<div class="outline-text-3" id="text-23-1">

<ul>
<li>Two types of errors: logic errors, infrastructure errors
</li>
<li>Logic errors: run test cases through python code in local mode. Don't need
     to test machine failure, EMR spin up, etc.
</li>
<li>Infrastructure: not loading the same libraries on cluster as in development
</li>
<li>mr<sub>canary</sub> loads all libraries, tries to run brain-dead logic. Does need to
     spin up cluster, but only once
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-24" class="outline-2">
<h2 id="sec-24"><span class="section-number-2">24</span> mrjob is Open Source &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span></span></h2>
<div class="outline-text-2" id="text-24">

<ul>
<li><a href="https://github.com/Yelp/mrjob">https://github.com/Yelp/mrjob</a>
</li>
<li>0.4 includes support for other languages
</li>
<li>MapReduce paradigm
</li>
<li>EMR cluster management
</li>
</ul>

<p>  <img src="img/beaker.png"  alt="img/beaker.png" />
</p>
</div>

<div id="outline-container-24-1" class="outline-3">
<h3 id="sec-24-1"><span class="section-number-3">24.1</span> Benefits &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h3>
<div class="outline-text-3" id="text-24-1">

<ul>
<li>open source development model works really well when you're making the
     general specific trade-off
</li>
<li>Don't want everyone in company to understand the internals
</li>
<li>But this means you need great documentation on <b>usage</b>, 
</li>
<li>Stable releases
</li>
<li>Keep it general for easy adoption
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-25" class="outline-2">
<h2 id="sec-25"><span class="section-number-2">25</span> Adoption &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span>&nbsp;<span class="two_col">two_col</span></span></h2>
<div class="outline-text-2" id="text-25">

<ul>
<li>Make data &amp; resources easily available
</li>
<li>Emphasize cloud benefits
</li>
<li>Easiest to do the right thing
</li>
</ul>

<p>  <img src="img/adopt.jpg"  alt="img/adopt.jpg" />
</p>
</div>

<div id="outline-container-25-1" class="outline-3">
<h3 id="sec-25-1"><span class="section-number-3">25.1</span> Story &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h3>
<div class="outline-text-3" id="text-25-1">

<ul>
<li>Let me tell you a story:
</li>
<li>We had one of these mrjob emails: "Hey this job is taking longer than a
     day"&hellip;
</li>
<li>Developer responded: oh, I expect this to take 5 days, backfilling a
     feature
</li>
<li>Learning opportunity: 5 days with 10 machines == 1 day with 50 machines
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-26" class="outline-2">
<h2 id="sec-26"><span class="section-number-2">26</span> Cloud Calculations &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span>&nbsp;<span class="two_col">two_col</span></span></h2>
<div class="outline-text-2" id="text-26">

<p>  <img src="img/cloud-cost.png"  alt="img/cloud-cost.png" />
</p><ul>
<li>5 days with 10 machines = 1 day with 50 machines
</li>
<li>(On demand pricing simplification)
</li>
</ul>


</div>

<div id="outline-container-26-1" class="outline-3">
<h3 id="sec-26-1"><span class="section-number-3">26.1</span> Emphasize &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h3>
<div class="outline-text-3" id="text-26-1">

<ul>
<li>Keep emphasizing the trade-offs you made: global speed for
     micro-optimizations!
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-27" class="outline-2">
<h2 id="sec-27"><span class="section-number-2">27</span> Cost &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span></span></h2>
<div class="outline-text-2" id="text-27">

<ul>
<li>Cloud allows infrastructure <b>practically</b> impossible with collocation
</li>
<li>Trade-off cost for flexibility, developer speed
</li>
<li>Not just hosting, paying for development
</li>
</ul>

<p>  <img src="img/aws.png"  alt="img/aws.png" />
</p>
</div>

<div id="outline-container-27-1" class="outline-3">
<h3 id="sec-27-1"><span class="section-number-3">27.1</span> Bogeyman &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h3>
<div class="outline-text-3" id="text-27-1">

<ul>
<li>Bogeyman of cloud
</li>
<li>To me, not really worth comparing directly. Cloud offers a fundamentally
     different model for development
</li>
<li>If you want that model, you must pay for it
</li>
<li>If you really want to compare, consider that Amazon is not just using your
     money to host. AWS was not the same last year as it is today: RedShift,
     SSDs.
</li>
<li>It will not be the same next year as it is today
</li>
<li>If you are just paying for hosting, then do the analysis and switch
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-28" class="outline-2">
<h2 id="sec-28"><span class="section-number-2">28</span> Cost Control &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span></span></h2>
<div class="outline-text-2" id="text-28">

<ul>
<li>EMRio: open source reserved instance purchasing
</li>
<li>mrjob: job-flow reuse, spot instances
</li>
<li><a href="http://highscalability.com/blog/2013/6/26/leveraging-cloud-computing-at-yelp-102-million-monthly-visto.html">HighScalability.com</a>: Leveraging Cloud Computing @ Yelp
</li>
</ul>

<p>  <img src="img/m1.large-long.png"  alt="img/m1.large-long.png" />
</p>
</div>

</div>

<div id="outline-container-29" class="outline-2">
<h2 id="sec-29"><span class="section-number-2">29</span> Data Availability &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span></span></h2>
<div class="outline-text-2" id="text-29">

<ul>
<li>Logs: production logs available to developers
</li>
<li>Development environment with separate permissions
</li>
<li><code>s3mysqldump</code> open source project to make MySQL data available
</li>
</ul>


</div>

<div id="outline-container-29-1" class="outline-3">
<h3 id="sec-29-1"><span class="section-number-3">29.1</span> Reminder &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h3>
<div class="outline-text-3" id="text-29-1">

<ul>
<li>Sensitive and PII information not in the logs
</li>
<li>Can optionally use development logs and DB instead, if needing to join
</li>
<li>AWS production credentials separate from development, same billing account
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-30" class="outline-2">
<h2 id="sec-30"><span class="section-number-2">30</span> Query to Category &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span></span></h2>
<div class="outline-text-2" id="text-30">

<ul>
<li>When people search for <b>Pool</b>, what do they mean?
</li>
<li>Swimming pool?
</li>
<li>Billiards?
</li>
<li>Home pool cleaning?
</li>
</ul>


</div>

<div id="outline-container-30-1" class="outline-3">
<h3 id="sec-30-1"><span class="section-number-3">30.1</span> Explanation &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h3>
<div class="outline-text-3" id="text-30-1">

<ul>
<li>So what type of features were we able to release with this technology?
</li>
<li>Well, what do people mean when they search for Pool?
</li>
</ul>


</div>

</div>

<div id="outline-container-30-2" class="outline-3">
<h3 id="sec-30-2"><span class="section-number-3">30.2</span> Query to Category &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span></span></h3>
<div class="outline-text-3" id="text-30-2">

<ul>
<li>When people search for <b>Pool</b>, what do they mean?
</li>
<li>Swimming pool?
</li>
<li>Billiards?
</li>
<li>Home pool cleaning?
</li>
</ul>

<p><img src="img/pool_table_in_pool.jpg"  alt="img/pool_table_in_pool.jpg" />
</p>
</div>

<div id="outline-container-30-2-1" class="outline-4">
<h4 id="sec-30-2-1"><span class="section-number-4">30.2.1</span> Unstructured Data &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h4>
<div class="outline-text-4" id="text-30-2-1">

<ul>
<li>We need to look at user behavior to better understand intent
</li>
<li>Use search logs to connect searches with the businesses customers end up on
</li>
<li>Different per country? Per city? Per person?
</li>
<li>Backfill: look at all of the search logs in our history
</li>
</ul>


</div>
</div>
</div>

</div>

<div id="outline-container-31" class="outline-2">
<h2 id="sec-31"><span class="section-number-2">31</span> Overview &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span>&nbsp;<span class="center">center</span></span></h2>
<div class="outline-text-2" id="text-31">

<p>  <img src="img/cloud-colo.png"  alt="img/cloud-colo.png" />
</p>
</div>

<div id="outline-container-31-1" class="outline-3">
<h3 id="sec-31-1"><span class="section-number-3">31.1</span> Data movement &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h3>
<div class="outline-text-3" id="text-31-1">

<ul>
<li>Webs use databases as OLTP, writing and reading transactions
</li>
<li>Webs log data, in JSON as described
</li>
<li>Once a day upload logs into S3
</li>
<li>Databases also get incrementally dumped into S3 with s3mysqldump
</li>
<li>mrjob launched jobs in EMR, processing this data
</li>
<li>Spits out either flat files
<ul>
<li>JSON gets further processed by Python, then loaded into DB
</li>
<li>CSV often gets loaded in via <code>LOAD DATA</code> statements
</li>
<li>When databases got overload from loading so much data, we created the
       tables in EMR, then just rsynced them (only works for MyISAM)
</li>
</ul>

</li>
<li>Online processes use this loaded data
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-32" class="outline-2">
<h2 id="sec-32"><span class="section-number-2">32</span> Pitfalls &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span>&nbsp;<span class="two_col">two_col</span></span></h2>
<div class="outline-text-2" id="text-32">

<ul>
<li>Leaky abstractions
</li>
<li>Closed source
</li>
<li>Managing data explosion
</li>
</ul>

<p>  <img src="img/pitfall.jpg"  alt="img/pitfall.jpg" />
</p>
</div>

<div id="outline-container-32-1" class="outline-3">
<h3 id="sec-32-1"><span class="section-number-3">32.1</span> Unicorns &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h3>
<div class="outline-text-3" id="text-32-1">

<ul>
<li>No silver bullet
</li>
<li>Still require skill to debug problems
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-33" class="outline-2">
<h2 id="sec-33"><span class="section-number-2">33</span> Leaky Abstractions &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span></span></h2>
<div class="outline-text-2" id="text-33">

<ul>
<li>"read-after-write" consistency in S3 extremely limited
</li>
<li>GET after PUT of specific new object
</li>
<li>Running Hadoop on S3 "directory" would sometimes miss files
</li>
<li>Solution: test for consistency, wait longer
</li>
</ul>


</div>

<div id="outline-container-33-1" class="outline-3">
<h3 id="sec-33-1"><span class="section-number-3">33.1</span> Read docs &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h3>
<div class="outline-text-3" id="text-33-1">

<ul>
<li>Upload logs to an S3 bucket each night, run job when done
</li>
<li>Just point job at directory, it LISTs file, runs over all the files
</li>
<li>But when "done" sometimes S3 would not LIST them
</li>
<li>Sometimes you will not get the semantics you would like
</li>
<li>Must work inside the framework&hellip; this is the trade-off
</li>
<li>Not a great solution here, but it has stopped coming up as much so lower
     priority
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-34" class="outline-2">
<h2 id="sec-34"><span class="section-number-2">34</span> Closed Source &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span></span></h2>
<div class="outline-text-2" id="text-34">

<ul>
<li>Some Hadoop output 'part' files blank or corrupted
</li>
<li>Speculative execution + S3 inconsistency + closed S3 uploader
</li>
<li>Solution: bootstrap-actions/configure-hadoop
    <code>mapred.reduce.tasks.speculative.execution=false</code>
</li>
</ul>


</div>

<div id="outline-container-34-1" class="outline-3">
<h3 id="sec-34-1"><span class="section-number-3">34.1</span> Interactions &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h3>
<div class="outline-text-3" id="text-34-1">

<ul>
<li>You will face problems with services and frameworks interacting
</li>
<li>You will need to work with provider to track down problems you don't have
     the source to
</li>
<li>Hope is you will do it less than if you were developing it yourself
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-35" class="outline-2">
<h2 id="sec-35"><span class="section-number-2">35</span> Data explosion &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span></span></h2>
<div class="outline-text-2" id="text-35">

<ul>
<li>Standardize location of inputs and outputs
</li>
<li>Semantic concept of "most recent" version of data
</li>
<li>Reuse and dependencies
</li>
<li>Partial solution: <a href="https://github.com/Yelp/Tron">Tron</a>: open source distributed* cron
</li>
</ul>


</div>

<div id="outline-container-35-1" class="outline-3">
<h3 id="sec-35-1"><span class="section-number-3">35.1</span> Tron &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h3>
<div class="outline-text-3" id="text-35-1">

<ul>
<li>One of those 'success is failure': so many people using cloud, need to
     track what's going on
</li>
<li>Sharing data across teams can be difficult. When will their job finish?
</li>
<li>Still want to run if dependency failed?
</li>
<li>More flexible configuration and reporting
</li>
<li>Can distribute jobs across machines, systems. State itself is not
     distributed
</li>
<li>Data Pipeline another potential solution
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-36" class="outline-2">
<h2 id="sec-36"><span class="section-number-2">36</span> Wanted &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span>&nbsp;<span class="center">center</span></span></h2>
<div class="outline-text-2" id="text-36">

<p>  <img src="img/wanted-db.png"  alt="img/wanted-db.png" />
</p>
</div>

<div id="outline-container-36-1" class="outline-3">
<h3 id="sec-36-1"><span class="section-number-3">36.1</span> What &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h3>
<div class="outline-text-3" id="text-36-1">

<ul>
<li>Currently we have a lot of customized solution for data flow
</li>
<li>s3mysqldump from mysql to S3, EMR for batch processing, some Hive for adhoc
     analysis, looking at Red Shift&hellip;
</li>
<li>Another system for syncing EMR output into MySQL by creating MyISAM tables
     in the cloud
</li>
<li>What keeps Red Shift and MySQL in sync?
</li>
<li>Would like to integrate them into a coherent system
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-37" class="outline-2">
<h2 id="sec-37"><span class="section-number-2">37</span> Next Up: Services &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span></span></h2>
<div class="outline-text-2" id="text-37">

<ul>
<li>Decrease coordination costs of launching new features
</li>
<li>Experiment with new stacks
</li>
<li>Sound familiar?
</li>
</ul>


</div>

<div id="outline-container-37-1" class="outline-3">
<h3 id="sec-37-1"><span class="section-number-3">37.1</span> Cloud &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h3>
<div class="outline-text-3" id="text-37-1">

<ul>
<li>We think AWS can help us develop services like add target and ElasticSearch
     faster
</li>
<li>We'll trade-off the optimizations we could make on our own hardware for the
     speed at which we can bring up services in an uncoordinated way
</li>
<li>Provide these services to consumers who don't have to know details
</li>
<li>Eg. ElasticSearch provided by search team
</li>
<li>Requires documentation, and making data available
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-38" class="outline-2">
<h2 id="sec-38"><span class="section-number-2">38</span> Tandem &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span></span></h2>
<div class="outline-text-2" id="text-38">

<ul>
<li>Direct Connect from Datacenter to AWS
</li>
<li>Generalized packaging: Python eggs, docker/packer
</li>
<li>AWS deployments: Netflix Animator, Jenkins testing
</li>
</ul>


</div>

<div id="outline-container-38-1" class="outline-3">
<h3 id="sec-38-1"><span class="section-number-3">38.1</span> Tools &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h3>
<div class="outline-text-3" id="text-38-1">

<ul>
<li>There are a few tools we're using to improve our services deployment stack
</li>
<li>still early days, but we've learned a few lessons
</li>
<li>Direct Connect to AWS decreases concerns about large data transfers and
     latencies: means you can run services in AWS and call them from the DC
</li>
<li>Packaging is critical. You'll never want to run something in only one
     environment, so make it easy to install. better than github sub-repos
</li>
<li>When creating ephemeral nodes, it makes more sense to create the exact
     machine image you want to use (Animator) and test it (Jenkins) before
     deploying it
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-39" class="outline-2">
<h2 id="sec-39"><span class="section-number-2">39</span> Cloud Strategy &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span></span></h2>
<div class="outline-text-2" id="text-39">

<ul>
<li>Target a problem you're trying to solve
</li>
<li>Trade-off <b>specificity &amp; optimization</b> for <b>generality &amp; abstraction</b>
</li>
<li>Leverage technology by fitting problem into domain
</li>
<li>Make the right way the easiest way
</li>
</ul>


</div>

<div id="outline-container-39-1" class="outline-3">
<h3 id="sec-39-1"><span class="section-number-3">39.1</span> Wrap Up &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h3>
<div class="outline-text-3" id="text-39-1">

<ul>
<li>So this is our Cloud Strategy:
</li>
<li>Make sure we have a problem we're trying to solve, and that the cloud is a
     good fit
</li>
<li>The cloud is a good fit when you want to make this trade-off of giving up
     extreme customizability and optimization for a general abstraction you can
     build on top of to achieve your goal.
</li>
<li>Then <b>make the trade-off</b>: fit your problem into the new domain, make the
     best use of available tools, and build new tools to fill in gaps. Give up
     the old way of doing things.
</li>
<li>Encourage adoption by giving developers the tools they need, make the right
     thing the easiest thing to do.
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-40" class="outline-2">
<h2 id="sec-40"><span class="section-number-2">40</span> Hiring &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span>&nbsp;<span class="center">center</span></span></h2>
<div class="outline-text-2" id="text-40">

<p><img src="img/yelp-careers.png"  alt="img/yelp-careers.png" />
</p>
<p>
<a href="http://www.yelp.com/careers">yelp.com/careers</a>
</p>
</div>

<div id="outline-container-40-1" class="outline-3">
<h3 id="sec-40-1"><span class="section-number-3">40.1</span> We are Hiring &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h3>
<div class="outline-text-3" id="text-40-1">

<ul>
<li>Position on almost every team
</li>
<li>We want to connect everybody on earth with the great local businesses in
     their area
</li>
<li>Need your help to make more open source solutions, apply them to
     interesting problems
</li>
</ul>






<script type="text/javascript" src="production/org-html-slideshow.js"></script>

</div>
</div>
</div>
</div>

<div id="postamble">
<p class="date">Date: 2013-11-05T23:39-0800</p>
<p class="author">Author: Jim Blomo</p>
<p class="creator"><a href="http://orgmode.org">Org</a> version 7.9.2 with <a href="http://www.gnu.org/software/emacs/">Emacs</a> version 24</p>
<a href="http://validator.w3.org/check?uri=referer">Validate XHTML 1.0</a>

</div>
</body>
</html>
